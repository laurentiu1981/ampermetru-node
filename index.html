<html>
<head>
    <link rel="stylesheet" type="text/css" href="/css/style.css"/>
    <script src="node_modules/socket.io/node_modules/socket.io-client/dist/socket.io.js"></script>
    <script src="jquery-1.7.2.js"></script>
    <script>
        var socket;
        jQuery(document).ready(function() {
            socket = io.connect('http://overdoser.org:6555');
            attachEventsOnSocket(socket);

            jQuery('.change-display').on('click', function(e) {
                e.preventDefault();

                var id = jQuery(e.target).attr('id');
                console.log('change display: ' + id);
                var action_param = id.replace('select-', '');
                socket.emit('display change', action_param.toUpperCase());
            })
        });

        function attachEventsOnSocket(socket) {
            socket.on('connect', function() {
                socket.on('send hosts', function(hosts) {
                    console.log(hosts);
                });
                console.log('here');
                socket.on('changed display', function(data) {
                    updateLeds(data);
                });
                socket.on('changed hostname', function(data) {
                    updateHosts(data);
                });
            });
        }

        function updateLeds(data) {
            console.log(data);
            var id = '#select-' + data.toLowerCase();
            jQuery('.change-display').removeClass('selected');
            jQuery(id).addClass('selected');
        }

        function updateHosts(data) {
            console.log(data);
        }


    </script>
</head>
<body>
<div id="controllers-wrapper">
    <a id="select-cpu" class="change-display" href="">CPU</a>
    <a id="select-mem" class="change-display" href="">MEM</a>
    <a id="select-hdd" class="change-display" href="">HDD</a>
</div>

</body>
</html>